#  Лабораторна: SOLID Refactoring

##  Про що лабораторна робота 
Суть проста: був жахливий код, який робив усе підряд в одному класі. Моє завдання — розбити його на нормальні модулі, щоб це виглядало як професійна архітектура.

---

##  Що було не так (Anti-SOLID)
У файлі `BadOrder.ts` був повний хаос:
* **Клас-комбайн:** Він одночасно рахував гроші, писав логи в базу і відправляв пошту.
* **Hardcode:** Знижки були прописані через `if/else`. Щоб додати нову, треба було лізти в робочий код і ламати його.
* **Жодних тестів:** Таке неможливо протестувати, бо клас сам створював свої залежності.

---

##  Як я це виправив
Я розкидав логіку по окремих файлах згідно з принципами SOLID:

1.  **SRP (Єдина відповідальність):**
    * `OrderStorage` — тепер тупо зберігає дані.
    * `EmailNotification` — суто шле листи.
    * `OrderService` — просто керує процесом, як диригент.

2.  **OCP (Відкритість/Закритість):**
    * Зробив інтерфейс `IDiscount`. Тепер, якщо треба додати знижку на Новий Рік, я створюю **окремий файл**, а старий код навіть не чіпаю.

3.  **DIP (Інверсія залежностей):**
    * Найголовніше: мій сервіс тепер не створює об'єкти через `new`. Він отримує їх готовими. Це дозволило легко підсунути йому тестові дані.

---

##  Структура проєкту
```text
src/
├── original/          # Той самий поганий код
├── refactored/        # Вже виправлена версія
│   ├── discounts.ts   # Логіка знижок
│   ├── payments.ts    # Оплата
│   ├── storage.ts     # База даних
│   ├── notification.ts# Сповіщення
│   └── OrderService.ts# Головний сервіс
├── interfaces/        # Типи (контракти)
└── tests/             # Перевірка

✅ Результати виконання роботи

Після рефакторингу система була перевірена за допомогою модульних тестів.

PASS  tests/refactored.spec.ts
 SOLID Order System
   ✓ Без знижки — сума має бути 100 (30 ms)
   ✓ VIP клієнт — знижка 20% (сума 80) (4 ms)
   ✓ Новий клієнт — знижка 10% (сума 90) (5 ms)

Test Suites: 1 passed, 1 total
Tests:       3 passed, 3 total
Snapshots:   0 total
Time:        0.779 s
